{
  "$schema": "https://raw.githubusercontent.com/formancehq/numscript/main/specs.schema.json",
  "featureFlags": ["experimental-virtual-account", "experimental-oneof"],
  "balances": {
    "merchant": { "EUR": 999999 }
  },
  "testCases": [
    {
      "it": "amt=100",
      "variables": { "amt": "100" },
      "expect.postings": [
        {
          "source": "merchant",
          "destination": "dest",
          "amount": 90,
          "asset": "EUR"
        },
        {
          "source": "merchant",
          "destination": "fees",
          "amount": 5,
          "asset": "EUR"
        },
        {
          "source": "merchant",
          "destination": "fees",
          "amount": 5,
          "asset": "EUR"
        }
      ]
    },
    {
      "it": "amt=10",
      "variables": { "amt": "10" },
      "expect.postings": [
        {
          "source": "merchant",
          "destination": "dest",
          "amount": 9,
          "asset": "EUR"
        },
        {
          "source": "merchant",
          "destination": "fees",
          "amount": 5,
          "asset": "EUR"
        }
      ]
    },
    {
      "it": "amt=6",
      "variables": { "amt": "6" },
      "expect.postings": [
        {
          "source": "merchant",
          "destination": "dest",
          "amount": 5,
          "asset": "EUR"
        },
        {
          "source": "merchant",
          "destination": "fees",
          "amount": 5,
          "asset": "EUR"
        }
      ]
    }
  ]
}
